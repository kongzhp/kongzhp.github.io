---
layout:     post
title:      "Cassandra使用笔记（3）"
subtitle:   "Database internals"
date:       2015-08-19 19:35:00
author:     "Pete Kong"
header-img: "img/post-bg-02.jpg"
---

# Cassandra存储基础
-----------------
## write path to compaction

Cassandra的写路径会包含以下几个阶段，从记录写日志开始，到compaction结束。

1. 记录写日志和memtable存储

	当发生写操作，cassandra会把数据存储到一个在内存中叫memtable的数据结构里，同时把写操作append到磁盘的commit log里，即使断电了，commit log都会保留。memtable会保存写数据直到达到阈值，然后flush。

2. 从memtable flush到磁盘

	